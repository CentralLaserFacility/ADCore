# This file contains the commands to build libraries using the common set of plugins
LIB_LIBS                += ADBase netCDF NeXus
LIB_LIBS                += asyn
ifeq ($(EPICS_LIBCOM_ONLY),YES)
  LIB_LIBS              += Com
else
  LIB_LIBS              += $(EPICS_BASE_IOC_LIBS)
endif

ifeq ($(EPICS_V4),YES)
  LIB_LIBS              += pvData
  LIB_LIBS              += pvDatabase
  LIB_LIBS              += nt
  LIB_LIBS              += pvAccess
  LIB_LIBS              += ntndArrayConverter
endif

# The following libraries are only needed for GraphicsMagick
ifeq ($(USE_GRAPHICSMAGICK), YES)
  LIB_LIBS_WIN32        += CORE_RL_Magick++_ CORE_RL_wand_ CORE_RL_magick_ 
  LIB_LIBS_WIN32        += CORE_RL_coders_ CORE_RL_filters_
  LIB_LIBS_WIN32        += CORE_RL_bzlib_ CORE_RL_jbig_ CORE_RL_jp2_ CORE_RL_jpeg_ CORE_RL_lcms_
  LIB_LIBS_WIN32        += CORE_RL_libxml_ CORE_RL_png_ CORE_RL_tiff_ CORE_RL_ttf_ CORE_RL_wmf_
  LIB_LIBS_WIN32        += CORE_RL_xlib_ CORE_RL_zlib_

  LIB_LIBS_cygwin32     += libGraphicsMagick++ libGraphicsMagickWand libGraphicsMagick
  LIB_LIBS_cygwin32     += liblcms libpng14 libbz2 libfreetype

  LIB_LIBS_Linux        += GraphicsMagick++ GraphicsMagickWand GraphicsMagick
  # The following system libraries must be installed to use GraphicsMagick
  LIB_SYS_LIBS_Linux    += gomp X11 png12 bz2 Xext freetype 

  LIB_LIBS_Darwin       += GraphicsMagick++ GraphicsMagickWand GraphicsMagick
  # The following system libraries must be installed to use GraphicsMagick
  LIB_SYS_LIBS_Darwin   += png bz2
  GraphicsMagick_DIR     = $(GRAPHICS_MAGICK_LIB)
  GraphicsMagick++_DIR   = $(GRAPHICS_MAGICK_LIB)
  GraphicsMagickWand_DIR = $(GRAPHICS_MAGICK_LIB)
endif

ifeq ($(HDF5_STATIC_BUILD), NO)
  USR_CXXFLAGS_WIN32    += -DH5_BUILT_AS_DYNAMIC_LIB
  USR_CFLAGS_WIN32      += -DH5_BUILT_AS_DYNAMIC_LIB
else
  USR_CXXFLAGS_WIN32    += -DH5_BUILT_AS_STATIC_LIB
  USR_CFLAGS_WIN32      += -DH5_BUILT_AS_STATIC_LIB
endif
LIB_LIBS_WIN32          += hdf5 
LIB_LIBS_WIN32          += tiff jpeg szip zlib xml2
LIB_SYS_LIBS_WIN32      += gdi32 oleaut32 

LIB_SYS_LIBS_cygwin32   += libhdf5
LIB_SYS_LIBS_cygwin32   += libtiff libjpeg libjbig libz libxml2
LIB_SYS_LIBS_cygwin32   += $(CYGWIN_RPC_LIB)
LIB_SYS_LIBS_cygwin32   += gdi32

LIB_LIBS_vxWorks        += hdf5
LIB_LIBS_vxWorks        += tiff jpeg szip zlib xml2 

ifeq ($(OS_CLASS), $(filter $(OS_CLASS), Linux Darwin solaris))
  ifdef HDF5_LIB
    hdf5_DIR            = $(HDF5_LIB)
    LIB_LIBS            += hdf5
  else
    LIB_SYS_LIBS        += hdf5
  endif
  ifdef SZIP
    ifdef SZIP_LIB
      sz_DIR             = $(SZIP_LIB)
      LIB_LIBS          += sz
    else
      LIB_SYS_LIBS      += sz
    endif
  endif
  LIB_SYS_LIBS          += tiff jpeg xml2 z
endif

USR_LDFLAGS_Darwin      += -framework CoreFoundation
